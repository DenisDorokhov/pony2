<div class="modal-header">
  <h4 class="modal-title">{{ user ? ('user.editHeader' | translate) : ('user.createHeader' | translate) }}</h4>
</div>
<div class="container">
  <form [formGroup]="userForm" (ngSubmit)="save()" novalidate>

    <pony-error [error]="error" [ignoredCodes]="['VALIDATION']"></pony-error>

    <input type="hidden" formControlName="id">

    <div class="mb-3">
      <label for="creationDate" class="form-label">{{ 'shared.creationDateLabel' | translate }}</label>
      <input id="creationDate" type="text" class="form-control" [value]="user?.creationDate | date:('shared.dateTimeFormat' | translate) " disabled>
    </div>

    <div class="mb-3">
      <label for="updateDate" class="form-label">{{ 'shared.updateDateLabel' | translate }}</label>
      <input id="updateDate" type="text" class="form-control" [value]="user?.updateDate | date:('shared.dateTimeFormat' | translate) " disabled>
    </div>

    <div class="mb-3">
      <pony-error-container class="form-group" [error]="error" [field]="'name'">
        <label for="name" class="form-label">{{ 'user.nameLabel' | translate }}</label>
        <input id="name" formControlName="name" type="text" class="form-control">
      </pony-error-container>
    </div>

    <div class="mb-3">
      <pony-error-container class="form-group" [error]="error" [field]="'email'">
        <label for="email" class="form-label">{{ 'user.emailLabel' | translate }}</label>
        <input id="email" formControlName="email" type="text" class="form-control" autocomplete="one-time-code">
      </pony-error-container>
    </div>

    <div class="mb-3">
      <pony-error-container class="form-group" [error]="error" [field]="'role'">
        <label for="role" class="form-label">{{ 'user.roleLabel' | translate }}</label>
        <select id="role" formControlName="role" class="form-control">
          <option *ngFor="let role of roles" [ngValue]="role">
            {{ role }}
          </option>
        </select>
      </pony-error-container>
    </div>

    <div class="mb-3" *ngIf="user === undefined">
      <pony-error-container class="form-group" [error]="error" [field]="'password'">
        <label for="password" class="form-label">{{ 'user.passwordLabel' | translate }}</label>
        <input id="password" formControlName="password" type="password" class="form-control" autocomplete="one-time-code">
      </pony-error-container>
    </div>

    <div class="mb-3" *ngIf="user !== undefined">
      <pony-error-container class="form-group" [error]="error" [field]="'newPassword'">
        <label for="newPassword" class="form-label">{{ 'user.newPasswordLabel' | translate }}</label>
        <input id="newPassword" formControlName="newPassword" type="password" class="form-control" autocomplete="one-time-code">
      </pony-error-container>
    </div>

  </form>
</div>
<div class="modal-footer">
  <button type="button" class="btn btn-outline-dark" (click)="activeModal.close()">{{ 'shared.cancelButton' | translate }}</button>
  <button type="submit" class="btn btn-primary" (click)="save()">{{ 'shared.saveButton' | translate }}</button>
</div>
