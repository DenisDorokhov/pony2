<div class="container">
  <div class="logo-container">
    <img src="./logo.svg">
  </div>
  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">{{ 'installation.mainHeader' | translate }}</h3>
    </div>
    <div class="panel-body">
      <form [formGroup]="installationForm" (ngSubmit)="install()" novalidate>

        <pony-error [error]="error" [ignoredCodes]="['VALIDATION']"></pony-error>

        <div class="form-group" formArrayName="libraryFolders">
          <span [class.has-error]="fieldHasViolation(error, 'libraryFolders')">
            <label class="control-label">{{ 'installation.libraryFoldersLabel' | translate }}</label>
          </span>
          <pony-error-container *ngFor="let libraryFolder of libraryFolders.controls; let i = index;"
                                [formGroupName]="i" [error]="error" [field]="'libraryFolders[' + i + '].path'">
            <div class="input-group">
              <input ponyAutoFocus formControlName="path" type="text" class="form-control"
                     [placeholder]="'installation.libraryFoldersPlaceholder' | translate">
              <span class="input-group-btn">
                <button type="button" class="btn btn-default add"
                        [disabled]="libraryFolders.controls.length >= 5"
                        (click)="addLibraryFolder()">
                  <i class="fa fa-plus"></i>
                </button>
                <button type="button" class="btn btn-default remove"
                        [disabled]="libraryFolders.controls.length <= 1"
                        (click)="removeLibraryFolder(i)">
                  <i class="fa fa-minus"></i>
                </button>
              </span>
            </div>
          </pony-error-container>
        </div>

        <pony-error-container class="form-group" [error]="error" [field]="'adminName'">
          <label for="adminName" class="control-label">{{ 'installation.adminNameLabel' | translate }}</label>
          <input id="adminName" formControlName="adminName" type="text" class="form-control"
                 [placeholder]="'installation.adminNamePlaceholder' | translate">
        </pony-error-container>

        <pony-error-container class="form-group" [error]="error" [field]="'adminEmail'">
          <label for="adminEmail" class="control-label">{{ 'installation.adminEmailLabel' | translate }}</label>
          <input id="adminEmail" formControlName="adminEmail" type="text" class="form-control"
                 [placeholder]="'installation.adminEmailPlaceholder' | translate">
        </pony-error-container>

        <pony-error-container class="form-group" [error]="error" [field]="'adminPassword'">
          <label for="adminPassword" class="control-label">{{ 'installation.adminPasswordLabel' | translate }}</label>
          <input id="adminPassword" formControlName="adminPassword" type="password" class="form-control"
                 [placeholder]="'installation.adminPasswordLabel' | translate">
        </pony-error-container>

        <pony-error-container class="form-group" [error]="error" [field]="'repeatAdminPassword'">
          <label for="repeatAdminPassword"
                 class="control-label">{{ 'installation.repeatAdminPasswordLabel' | translate }}</label>
          <input id="repeatAdminPassword" formControlName="repeatAdminPassword" type="password" class="form-control"
                 [placeholder]="'installation.repeatAdminPasswordPlaceholder' | translate">
        </pony-error-container>

        <pony-error-container class="form-group" [error]="error" [field]="'installationSecret'">
          <label for="installationSecret"
                 class="control-label">{{ 'installation.installationSecretLabel' | translate }}</label>
          <input id="installationSecret" formControlName="installationSecret" type="password" class="form-control"
                 [placeholder]="'installation.installationSecretPlaceholder' | translate">
        </pony-error-container>

        <button type="submit" class="btn btn-primary">{{ 'installation.installButton' | translate }}</button>

      </form>
    </div>
  </div>
</div>
